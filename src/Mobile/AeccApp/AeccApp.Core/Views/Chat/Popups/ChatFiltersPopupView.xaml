<?xml version="1.0" encoding="utf-8" ?>
<vPop:PopupPage
    x:Class="AeccApp.Core.Views.Popups.ChatFiltersPopupView"
    xmlns="http://xamarin.com/schemas/2014/forms"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:converters="clr-namespace:AeccApp.Core.Converters"
    xmlns:ctrl="clr-namespace:AeccApp.Core.Controls"
    xmlns:ctrlRange="clr-namespace:Xamarin.RangeSlider.Forms;assembly=Xamarin.RangeSlider.Forms"
    xmlns:ctrlXlabs="clr-namespace:XLabs.Forms.Controls"
    xmlns:vPop="clr-namespace:Rg.Plugins.Popup.Pages;assembly=Rg.Plugins.Popup"
    BackgroundColor="{StaticResource SeeThrough}">
    <vPop:PopupPage.Resources>
        <ResourceDictionary>
            <converters:BooleanToColorConverter x:Key="BooleanToColorConverter" />
        </ResourceDictionary>
    </vPop:PopupPage.Resources>

    <ContentView
        Margin="20"
        Style="{StaticResource BorderStyle}"
        VerticalOptions="Center">
        <ContentView Style="{StaticResource InternalViewStyle}">

            <StackLayout
                Margin="1"
                Padding="20"
                BackgroundColor="{StaticResource BackgroundColor}">

                <Label
                    Margin="10"
                    HorizontalOptions="Center"
                    Text="{Binding [CommonAge]}" />

                <ctrlRange:RangeSlider
                    BarHeight="10"
                    LowerValue="{Binding MinimumAge, Mode=TwoWay}"
                    MaximumValue="80"
                    MinimumValue="18"
                    ShowTextAboveThumbs="True"
                    StepValue="1"
                    StepValueContinuously="True"
                    TextSize="15"
                    UpperValue="{Binding MaximumAge, Mode=TwoWay}" />


                <BoxView
                    Margin="0,10,0,0"
                    HeightRequest="1"
                    Color="Black" />

                <Label
                    Margin="10"
                    HorizontalOptions="Center"
                    Text="{Binding [CommonGender]}" />


                <Grid HorizontalOptions="Center">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>

                    <ctrl:CustomImage
                        Grid.Column="0"
                        Margin="20"
                        BackgroundColor="{Binding GenderWomen, Converter={StaticResource BooleanToColorConverter}}"
                        HeightRequest="100"
                        HorizontalOptions="Center"
                        SourcePlatform="gender_female"
                        VerticalOptions="Center"
                        WidthRequest="100">
                        <ctrl:CustomImage.GestureRecognizers>
                            <TapGestureRecognizer Command="{Binding SwitchGenderCommand}" CommandParameter="0" />
                        </ctrl:CustomImage.GestureRecognizers>
                    </ctrl:CustomImage>

                    <ctrl:CustomImage
                        Grid.Column="1"
                        Margin="20"
                        BackgroundColor="{Binding GenderMen, Converter={StaticResource BooleanToColorConverter}}"
                        HeightRequest="100"
                        HorizontalOptions="Center"
                        SourcePlatform="gender_male"
                        VerticalOptions="Center"
                        WidthRequest="100">
                        <ctrl:CustomImage.GestureRecognizers>
                            <TapGestureRecognizer Command="{Binding SwitchGenderCommand}" CommandParameter="1" />
                        </ctrl:CustomImage.GestureRecognizers>
                    </ctrl:CustomImage>

                </Grid>


                <BoxView HeightRequest="1" Color="LightGray" />

                <Button
                    Margin="10"
                    Command="{Binding ApplyFiltersCommand}"
                    Style="{StaticResource ButtonStyle}"
                    Text="{Binding [CommonApplyFilters]}" />
            </StackLayout>

        </ContentView>
    </ContentView>
</vPop:PopupPage>